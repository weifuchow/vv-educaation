{
  "schema": "vvce.dsl.v1",
  "meta": {
    "id": "bezier-curve-interactive",
    "version": "1.0.0",
    "title": "è´å¡å°”æ›²çº¿äº¤äº’å¼è¯¾ç¨‹",
    "author": "VV Education",
    "description": "æ¢ç´¢è´å¡å°”æ›²çº¿çš„ç”ŸæˆåŸç†ï¼Œé€šè¿‡äº¤äº’å¼åŠ¨ç”»ç†è§£ de Casteljau ç®—æ³•",
    "category": "math"
  },
  "imports": [
    { "pack": "keyframes/math" },
    { "pack": "interactive/math", "type": "interactive" }
  ],
  "globals": {
    "vars": {
      "score": 0,
      "attempt": 0,
      "progress": 0
    }
  },
  "resources": {
    "styles": {
      "card": {
        "padding": 20,
        "borderRadius": 12,
        "backgroundColor": "rgba(255, 255, 255, 0.05)",
        "backdropFilter": "blur(10px)"
      }
    }
  },
  "theme": "tech",
  "startSceneId": "intro",
  "scenes": [
    {
      "id": "intro",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 20,
        "padding": 24,
        "align": "center"
      },
      "nodes": [
        {
          "id": "welcome-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "æ¬¢è¿æ¥åˆ°è´å¡å°”æ›²çº¿è¯¾ç¨‹ï¼ğŸ¨\n\nè´å¡å°”æ›²çº¿æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­æœ€é‡è¦çš„æ›²çº¿ä¹‹ä¸€ï¼Œå¹¿æ³›åº”ç”¨äºï¼š\nâ€¢ å­—ä½“è®¾è®¡ï¼ˆTrueTypeã€OpenTypeï¼‰\nâ€¢ çŸ¢é‡å›¾å½¢ï¼ˆSVGã€AIã€PSï¼‰\nâ€¢ åŠ¨ç”»ç¼“åŠ¨å‡½æ•°\nâ€¢ æ±½è½¦å’Œé£æœºå¤–å½¢è®¾è®¡"
          },
          "enterAnimation": {
            "type": "fadeIn",
            "duration": 600
          }
        },
        {
          "id": "intro-btn",
          "type": "Button",
          "props": {
            "text": "å¼€å§‹æ¢ç´¢ â†’"
          },
          "enterAnimation": {
            "type": "bounceIn",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "intro-btn" },
          "then": [{ "action": "gotoScene", "sceneId": "concept" }]
        }
      ],
      "transition": { "type": "fade", "duration": 400 }
    },
    {
      "id": "concept",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24
      },
      "nodes": [
        {
          "id": "concept-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "ğŸ“ ä»€ä¹ˆæ˜¯è´å¡å°”æ›²çº¿ï¼Ÿ\n\nè´å¡å°”æ›²çº¿ç”±è‹¥å¹²ä¸ªã€Œæ§åˆ¶ç‚¹ã€å®šä¹‰ï¼š\nâ€¢ 2ä¸ªæ§åˆ¶ç‚¹ â†’ ä¸€æ¬¡è´å¡å°”ï¼ˆç›´çº¿ï¼‰\nâ€¢ 3ä¸ªæ§åˆ¶ç‚¹ â†’ äºŒæ¬¡è´å¡å°”ï¼ˆæŠ›ç‰©çº¿ï¼‰\nâ€¢ 4ä¸ªæ§åˆ¶ç‚¹ â†’ ä¸‰æ¬¡è´å¡å°”ï¼ˆæœ€å¸¸ç”¨ï¼‰\n\næ›²çº¿çš„å½¢çŠ¶å®Œå…¨ç”±è¿™äº›æ§åˆ¶ç‚¹å†³å®šï¼"
          },
          "enterAnimation": {
            "type": "slideInLeft",
            "duration": 400
          }
        },
        {
          "id": "thinking-box",
          "type": "Thinking",
          "props": {
            "title": "ğŸ¤” æ€è€ƒä¸€ä¸‹",
            "text": "ä¸ºä»€ä¹ˆåªéœ€è¦å‡ ä¸ªæ§åˆ¶ç‚¹å°±èƒ½å®šä¹‰ä¸€æ¡å¹³æ»‘çš„æ›²çº¿ï¼Ÿ\nç§˜å¯†åœ¨äºä¸€ä¸ªä¼˜é›…çš„ç®—æ³•â€”â€”de Casteljau ç®—æ³•ï¼"
          },
          "enterAnimation": {
            "type": "fadeIn",
            "delay": 300
          }
        },
        {
          "id": "next-btn-1",
          "type": "Button",
          "props": {
            "text": "äº†è§£ç®—æ³•åŸç† â†’"
          },
          "enterAnimation": {
            "type": "slideInUp",
            "delay": 500
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "next-btn-1" },
          "then": [{ "action": "gotoScene", "sceneId": "algorithm" }]
        }
      ]
    },
    {
      "id": "algorithm",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24
      },
      "nodes": [
        {
          "id": "algo-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "ğŸ”¬ de Casteljau ç®—æ³•\n\nè¿™ä¸ªç®—æ³•ç”¨é€’å½’çš„æ–¹å¼è®¡ç®—æ›²çº¿ä¸Šçš„æ¯ä¸€ä¸ªç‚¹ï¼š\n\n1. åœ¨æ¯æ¡æ§åˆ¶çº¿æ®µä¸Šï¼ŒæŒ‰æ¯”ä¾‹ t å–ä¸€ä¸ªç‚¹\n2. è¿æ¥è¿™äº›æ–°ç‚¹ï¼Œå½¢æˆæ–°çš„çº¿æ®µ\n3. é‡å¤æ­¥éª¤1-2ï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªç‚¹\n4. è¿™ä¸ªç‚¹å°±åœ¨è´å¡å°”æ›²çº¿ä¸Šï¼\n\nt ä» 0 åˆ° 1 å˜åŒ–æ—¶ï¼Œå°±èƒ½ç”»å‡ºæ•´æ¡æ›²çº¿ã€‚"
          },
          "enterAnimation": {
            "type": "fadeIn",
            "duration": 400
          }
        },
        {
          "id": "formula-box",
          "type": "Conclusion",
          "props": {
            "title": "ğŸ“ æ•°å­¦å…¬å¼",
            "text": "B(t) = Î£ C(n,i) Â· (1-t)^(n-i) Â· t^i Â· P_i\n\nå…¶ä¸­ n æ˜¯æ›²çº¿é˜¶æ•°ï¼ŒP_i æ˜¯æ§åˆ¶ç‚¹\n\nä½†åˆ«æ‹…å¿ƒï¼æˆ‘ä»¬é©¬ä¸Šç”¨å¯è§†åŒ–æ¥ç†è§£å®ƒ âœ¨"
          },
          "enterAnimation": {
            "type": "scaleIn",
            "delay": 200
          }
        },
        {
          "id": "start-demo-btn",
          "type": "Button",
          "props": {
            "text": "å¼€å§‹äº¤äº’æ¼”ç¤º â†’"
          },
          "enterAnimation": {
            "type": "bounceIn",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "start-demo-btn" },
          "then": [{ "action": "gotoScene", "sceneId": "interactive" }]
        }
      ]
    },
    {
      "id": "interactive",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 12,
        "padding": 16
      },
      "nodes": [
        {
          "id": "demo-title",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "ğŸ® äº¤äº’å¼è´å¡å°”æ›²çº¿\næ‹–æ‹½çº¢è‰²æ§åˆ¶ç‚¹ï¼Œè§‚å¯Ÿæ›²çº¿å¦‚ä½•å˜åŒ–ï¼æ’­æ”¾åŠ¨ç”»çœ‹ de Casteljau ç®—æ³•çš„æ„é€ è¿‡ç¨‹ã€‚æ‚¬åœåœ¨æ›²çº¿ä¸ŠæŸ¥çœ‹ t å€¼å’Œåæ ‡ã€‚"
          },
          "enterAnimation": {
            "type": "fadeIn",
            "duration": 300
          }
        },
        {
          "id": "bezier-animation",
          "type": "Animation",
          "props": {
            "type": "interactive/math.bezier-curve",
            "autoplay": false,
            "params": {
              "showGrid": true,
              "showConstruction": true,
              "showControlLines": true,
              "curveColor": "#4ecdc4",
              "controlPointColor": "#ff6b6b",
              "duration": 3000
            }
          },
          "enterAnimation": {
            "type": "scaleIn",
            "duration": 500
          }
        },
        {
          "id": "demo-controls",
          "type": "Controls",
          "props": {
            "buttons": [{ "id": "quiz-btn", "text": "ğŸ“ å»åšæµ‹éªŒ" }]
          },
          "enterAnimation": {
            "type": "slideInUp",
            "delay": 300
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "demo-controls" },
          "if": [
            {
              "op": "equals",
              "left": "quiz-btn",
              "right": "quiz-btn"
            }
          ],
          "then": [{ "action": "gotoScene", "sceneId": "quiz-1" }]
        }
      ]
    },
    {
      "id": "quiz-1",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24
      },
      "nodes": [
        {
          "id": "quiz-1-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "ğŸ“ æµ‹éªŒæ—¶é—´ï¼è®©æˆ‘ä»¬æ£€éªŒä¸€ä¸‹ä½ çš„ç†è§£ã€‚"
          },
          "enterAnimation": {
            "type": "fadeIn"
          }
        },
        {
          "id": "quiz-1-question",
          "type": "QuizSingle",
          "props": {
            "question": "ä¸€æ¡ä¸‰æ¬¡è´å¡å°”æ›²çº¿éœ€è¦å‡ ä¸ªæ§åˆ¶ç‚¹ï¼Ÿ",
            "options": ["2ä¸ª", "3ä¸ª", "4ä¸ª", "5ä¸ª"],
            "answerKey": "4ä¸ª"
          },
          "enterAnimation": {
            "type": "slideInLeft",
            "delay": 200
          }
        },
        {
          "id": "submit-btn-1",
          "type": "Button",
          "props": {
            "text": "æäº¤ç­”æ¡ˆ"
          },
          "enterAnimation": {
            "type": "bounceIn",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "submit-btn-1" },
          "if": [
            {
              "op": "equals",
              "left": { "ref": "nodes.quiz-1-question.selected" },
              "right": "4ä¸ª"
            }
          ],
          "then": [
            { "action": "addScore", "value": 10 },
            {
              "action": "playAnimation",
              "target": "quiz-1-question",
              "animation": "pulse"
            },
            { "action": "toast", "text": "å›ç­”æ­£ç¡®ï¼+10åˆ† ğŸ‰" },
            { "action": "delay", "ms": 1500 },
            { "action": "gotoScene", "sceneId": "quiz-2" }
          ],
          "else": [
            { "action": "incVar", "path": "globals.vars.attempt", "by": 1 },
            {
              "action": "playAnimation",
              "target": "quiz-1-question",
              "animation": "shake"
            },
            { "action": "toast", "text": "æç¤ºï¼šä¸‰æ¬¡ = næ¬¡ï¼Œéœ€è¦ n+1 ä¸ªæ§åˆ¶ç‚¹ ğŸ¤”" }
          ]
        }
      ]
    },
    {
      "id": "quiz-2",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24
      },
      "nodes": [
        {
          "id": "quiz-2-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "å¾ˆå¥½ï¼ç»§ç»­ä¸‹ä¸€é¢˜ã€‚"
          },
          "enterAnimation": {
            "type": "fadeIn"
          }
        },
        {
          "id": "quiz-2-question",
          "type": "QuizSingle",
          "props": {
            "question": "å½“å‚æ•° t = 0 æ—¶ï¼Œè´å¡å°”æ›²çº¿ä¸Šçš„ç‚¹åœ¨å“ªé‡Œï¼Ÿ",
            "options": ["æ›²çº¿ä¸­ç‚¹", "ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹", "æœ€åä¸€ä¸ªæ§åˆ¶ç‚¹", "ä¸ç¡®å®š"],
            "answerKey": "ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹"
          },
          "enterAnimation": {
            "type": "slideInLeft",
            "delay": 200
          }
        },
        {
          "id": "submit-btn-2",
          "type": "Button",
          "props": {
            "text": "æäº¤ç­”æ¡ˆ"
          },
          "enterAnimation": {
            "type": "bounceIn",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "submit-btn-2" },
          "if": [
            {
              "op": "equals",
              "left": { "ref": "nodes.quiz-2-question.selected" },
              "right": "ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹"
            }
          ],
          "then": [
            { "action": "addScore", "value": 10 },
            {
              "action": "playAnimation",
              "target": "quiz-2-question",
              "animation": "pulse"
            },
            { "action": "toast", "text": "å®Œå…¨æ­£ç¡®ï¼+10åˆ† ğŸ‰" },
            { "action": "delay", "ms": 1500 },
            { "action": "gotoScene", "sceneId": "quiz-3" }
          ],
          "else": [
            { "action": "incVar", "path": "globals.vars.attempt", "by": 1 },
            {
              "action": "playAnimation",
              "target": "quiz-2-question",
              "animation": "shake"
            },
            { "action": "toast", "text": "æç¤ºï¼št=0 æ—¶ï¼Œæ›²çº¿ä»èµ·ç‚¹å¼€å§‹ ğŸ¤”" }
          ]
        }
      ]
    },
    {
      "id": "quiz-3",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24
      },
      "nodes": [
        {
          "id": "quiz-3-dialog",
          "type": "Dialog",
          "props": {
            "speaker": "VVè€å¸ˆ",
            "text": "æœ€åä¸€é¢˜ï¼ŒåŠ æ²¹ï¼"
          },
          "enterAnimation": {
            "type": "fadeIn"
          }
        },
        {
          "id": "quiz-3-question",
          "type": "QuizSingle",
          "props": {
            "question": "de Casteljau ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ",
            "options": [
              "ç›´æ¥è®¡ç®—æ›²çº¿æ–¹ç¨‹",
              "é€’å½’åœ°åœ¨çº¿æ®µä¸Šå–æ¯”ä¾‹ç‚¹",
              "ç”¨å‚…é‡Œå¶å˜æ¢",
              "éšæœºé‡‡æ ·"
            ],
            "answerKey": "é€’å½’åœ°åœ¨çº¿æ®µä¸Šå–æ¯”ä¾‹ç‚¹"
          },
          "enterAnimation": {
            "type": "slideInLeft",
            "delay": 200
          }
        },
        {
          "id": "submit-btn-3",
          "type": "Button",
          "props": {
            "text": "æäº¤ç­”æ¡ˆ"
          },
          "enterAnimation": {
            "type": "bounceIn",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "submit-btn-3" },
          "if": [
            {
              "op": "equals",
              "left": { "ref": "nodes.quiz-3-question.selected" },
              "right": "é€’å½’åœ°åœ¨çº¿æ®µä¸Šå–æ¯”ä¾‹ç‚¹"
            }
          ],
          "then": [
            { "action": "addScore", "value": 10 },
            {
              "action": "playAnimation",
              "target": "quiz-3-question",
              "animation": "pulse"
            },
            { "action": "toast", "text": "å¤ªæ£’äº†ï¼+10åˆ† ğŸ‰" },
            { "action": "delay", "ms": 1500 },
            { "action": "gotoScene", "sceneId": "summary" }
          ],
          "else": [
            { "action": "incVar", "path": "globals.vars.attempt", "by": 1 },
            {
              "action": "playAnimation",
              "target": "quiz-3-question",
              "animation": "shake"
            },
            { "action": "toast", "text": "å›æƒ³ä¸€ä¸‹åŠ¨ç”»ä¸­çš„æ„é€ è¿‡ç¨‹ ğŸ¤”" }
          ]
        }
      ]
    },
    {
      "id": "summary",
      "layout": {
        "type": "stack",
        "direction": "vertical",
        "gap": 16,
        "padding": 24,
        "align": "center"
      },
      "nodes": [
        {
          "id": "summary-title",
          "type": "Conclusion",
          "props": {
            "title": "ğŸ“ è¯¾ç¨‹å®Œæˆï¼",
            "text": "æ­å–œä½ å®Œæˆäº†è´å¡å°”æ›²çº¿çš„å­¦ä¹ ï¼\n\nä½ çš„å¾—åˆ†ï¼š{{globals.vars.score}} åˆ†\n\nğŸ“š ä»Šå¤©ä½ å­¦åˆ°äº†ï¼š\nâ€¢ è´å¡å°”æ›²çº¿ç”±æ§åˆ¶ç‚¹å®šä¹‰\nâ€¢ næ¬¡è´å¡å°”æ›²çº¿éœ€è¦ n+1 ä¸ªæ§åˆ¶ç‚¹\nâ€¢ de Casteljau ç®—æ³•é€šè¿‡é€’å½’å–æ¯”ä¾‹ç‚¹æ„é€ æ›²çº¿\nâ€¢ t ä» 0 åˆ° 1 éå†æ•´æ¡æ›²çº¿"
          },
          "enterAnimation": {
            "type": "scaleIn"
          }
        },
        {
          "id": "back-to-demo-btn",
          "type": "Button",
          "props": {
            "text": "ğŸ® å†ç©ä¸€æ¬¡äº¤äº’æ¼”ç¤º"
          },
          "enterAnimation": {
            "type": "slideInUp",
            "delay": 300
          }
        },
        {
          "id": "restart-btn",
          "type": "Button",
          "props": {
            "text": "â†º é‡æ–°å­¦ä¹ "
          },
          "enterAnimation": {
            "type": "slideInUp",
            "delay": 400
          }
        }
      ],
      "triggers": [
        {
          "on": { "event": "click", "target": "back-to-demo-btn" },
          "then": [{ "action": "gotoScene", "sceneId": "interactive" }]
        },
        {
          "on": { "event": "click", "target": "restart-btn" },
          "then": [
            { "action": "setVar", "path": "globals.vars.score", "value": 0 },
            { "action": "setVar", "path": "globals.vars.attempt", "value": 0 },
            { "action": "gotoScene", "sceneId": "intro" }
          ]
        }
      ]
    }
  ]
}

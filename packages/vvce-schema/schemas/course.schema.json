{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://vv-education.com/schemas/course.schema.json",
  "title": "VVCE Course DSL",
  "description": "VV Courseware Engine DSL v1.1 with enhanced style and animation support",
  "type": "object",
  "required": ["schema", "meta", "startSceneId", "scenes"],
  "properties": {
    "schema": {
      "type": "string",
      "const": "vvce.dsl.v1",
      "description": "DSL version identifier"
    },
    "meta": {
      "$ref": "#/$defs/CourseMeta"
    },
    "globals": {
      "$ref": "#/$defs/CourseGlobals"
    },
    "resources": {
      "$ref": "#/$defs/CourseResources"
    },
    "theme": {
      "oneOf": [{ "$ref": "#/$defs/ThemeConfig" }, { "$ref": "#/$defs/BuiltinTheme" }]
    },
    "startSceneId": {
      "type": "string",
      "minLength": 1,
      "description": "ID of the initial scene"
    },
    "scenes": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/SceneDSL"
      },
      "minItems": 1,
      "description": "List of course scenes"
    }
  },
  "$defs": {
    "CourseMeta": {
      "type": "object",
      "required": ["id", "version"],
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1,
          "description": "Unique course identifier"
        },
        "version": {
          "type": "string",
          "minLength": 1,
          "description": "Course version"
        },
        "title": {
          "type": "string",
          "description": "Course title"
        },
        "description": {
          "type": "string",
          "description": "Course description"
        },
        "author": {
          "type": "string",
          "description": "Course author"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        }
      }
    },
    "CourseGlobals": {
      "type": "object",
      "properties": {
        "vars": {
          "type": "object",
          "additionalProperties": true,
          "description": "Global variables"
        }
      }
    },
    "CourseResources": {
      "type": "object",
      "properties": {
        "variables": {
          "$ref": "#/$defs/StyleVariables"
        },
        "animations": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/AnimationDefinition"
          }
        },
        "transitions": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/TransitionDefinition"
          }
        },
        "styles": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/StyleDefinition"
          }
        },
        "assets": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/AssetDefinition"
          }
        }
      }
    },
    "StyleVariables": {
      "type": "object",
      "properties": {
        "colors": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        },
        "spacing": {
          "type": "object",
          "additionalProperties": {
            "oneOf": [{ "type": "number" }, { "type": "string" }]
          }
        },
        "fontSizes": {
          "type": "object",
          "additionalProperties": {
            "oneOf": [{ "type": "number" }, { "type": "string" }]
          }
        },
        "fontFamilies": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        },
        "radii": {
          "type": "object",
          "additionalProperties": {
            "oneOf": [{ "type": "number" }, { "type": "string" }]
          }
        },
        "shadows": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        },
        "custom": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "AnimationDefinition": {
      "type": "object",
      "required": ["keyframes"],
      "properties": {
        "keyframes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/AnimationKeyframe"
          },
          "minItems": 1
        },
        "duration": {
          "type": "number",
          "minimum": 0
        },
        "easing": {
          "$ref": "#/$defs/EasingFunction"
        },
        "delay": {
          "type": "number",
          "minimum": 0
        },
        "iterations": {
          "type": "integer",
          "minimum": -1
        },
        "direction": {
          "type": "string",
          "enum": ["normal", "reverse", "alternate", "alternate-reverse"]
        },
        "fillMode": {
          "type": "string",
          "enum": ["none", "forwards", "backwards", "both"]
        }
      }
    },
    "AnimationKeyframe": {
      "type": "object",
      "required": ["offset", "properties"],
      "properties": {
        "offset": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "properties": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "TransitionDefinition": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "$ref": "#/$defs/TransitionType"
        },
        "duration": {
          "type": "number",
          "minimum": 0
        },
        "easing": {
          "$ref": "#/$defs/EasingFunction"
        },
        "direction": {
          "$ref": "#/$defs/TransitionDirection"
        },
        "params": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "TransitionType": {
      "type": "string",
      "enum": [
        "none",
        "fade",
        "slide",
        "scale",
        "flip",
        "rotate",
        "zoom",
        "bounce",
        "blur",
        "morph",
        "wipe",
        "reveal",
        "cube",
        "carousel",
        "stack",
        "shuffle",
        "custom"
      ]
    },
    "TransitionDirection": {
      "type": "string",
      "enum": ["left", "right", "up", "down", "center", "random"]
    },
    "EasingFunction": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "linear",
            "ease",
            "ease-in",
            "ease-out",
            "ease-in-out",
            "spring",
            "bounce",
            "elastic"
          ]
        },
        {
          "type": "string",
          "pattern": "^cubic-bezier\\([0-9.]+,[0-9.]+,[0-9.]+,[0-9.]+\\)$"
        }
      ]
    },
    "StyleDefinition": {
      "type": "object",
      "properties": {
        "base": { "$ref": "#/$defs/StyleProperties" },
        "hover": { "$ref": "#/$defs/StyleProperties" },
        "active": { "$ref": "#/$defs/StyleProperties" },
        "disabled": { "$ref": "#/$defs/StyleProperties" },
        "focus": { "$ref": "#/$defs/StyleProperties" },
        "responsive": { "$ref": "#/$defs/ResponsiveStyles" }
      }
    },
    "ResponsiveStyles": {
      "type": "object",
      "properties": {
        "sm": { "$ref": "#/$defs/StyleProperties" },
        "md": { "$ref": "#/$defs/StyleProperties" },
        "lg": { "$ref": "#/$defs/StyleProperties" },
        "xl": { "$ref": "#/$defs/StyleProperties" }
      }
    },
    "StyleProperties": {
      "type": "object",
      "properties": {
        "width": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "height": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "minWidth": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "maxWidth": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "minHeight": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "maxHeight": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "padding": {
          "oneOf": [
            { "type": "number" },
            { "type": "string" },
            { "type": "array", "items": { "type": "number" } }
          ]
        },
        "margin": {
          "oneOf": [
            { "type": "number" },
            { "type": "string" },
            { "type": "array", "items": { "type": "number" } }
          ]
        },
        "flex": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "flexDirection": {
          "type": "string",
          "enum": ["row", "column", "row-reverse", "column-reverse"]
        },
        "justifyContent": {
          "type": "string",
          "enum": ["start", "center", "end", "between", "around", "evenly"]
        },
        "alignItems": {
          "type": "string",
          "enum": ["start", "center", "end", "stretch", "baseline"]
        },
        "gap": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "position": {
          "type": "string",
          "enum": ["relative", "absolute", "fixed", "sticky"]
        },
        "top": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "right": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "bottom": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "left": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "zIndex": { "type": "integer" },
        "backgroundColor": { "type": "string" },
        "backgroundImage": { "type": "string" },
        "backgroundSize": { "type": "string" },
        "backgroundPosition": { "type": "string" },
        "borderWidth": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "borderColor": { "type": "string" },
        "borderStyle": {
          "type": "string",
          "enum": ["solid", "dashed", "dotted", "none"]
        },
        "borderRadius": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "boxShadow": { "type": "string" },
        "textShadow": { "type": "string" },
        "color": { "type": "string" },
        "fontSize": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "fontWeight": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "fontFamily": { "type": "string" },
        "lineHeight": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "textAlign": { "type": "string", "enum": ["left", "center", "right", "justify"] },
        "letterSpacing": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "opacity": { "type": "number", "minimum": 0, "maximum": 1 },
        "visibility": { "type": "string", "enum": ["visible", "hidden"] },
        "overflow": { "type": "string", "enum": ["visible", "hidden", "scroll", "auto"] },
        "cursor": { "type": "string" },
        "pointerEvents": { "type": "string", "enum": ["auto", "none"] },
        "userSelect": { "type": "string", "enum": ["auto", "none", "text", "all"] }
      },
      "additionalProperties": true
    },
    "AssetDefinition": {
      "type": "object",
      "required": ["id", "type", "url"],
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "type": {
          "type": "string",
          "enum": ["image", "font", "audio", "video", "lottie", "spine"]
        },
        "url": { "type": "string", "minLength": 1 },
        "preload": { "type": "boolean" },
        "fallback": { "type": "string" }
      }
    },
    "ThemeConfig": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "extends": { "$ref": "#/$defs/BuiltinTheme" },
        "mode": { "type": "string", "enum": ["light", "dark", "auto"] },
        "variables": { "$ref": "#/$defs/StyleVariables" },
        "components": {
          "type": "object",
          "additionalProperties": { "$ref": "#/$defs/StyleDefinition" }
        }
      }
    },
    "BuiltinTheme": {
      "type": "string",
      "enum": [
        "default",
        "playful",
        "academic",
        "minimal",
        "vibrant",
        "dark",
        "nature",
        "tech",
        "retro"
      ]
    },
    "SceneDSL": {
      "type": "object",
      "required": ["id"],
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "title": { "type": "string" },
        "layout": { "$ref": "#/$defs/LayoutConfig" },
        "style": { "$ref": "#/$defs/StyleProperties" },
        "enterTransition": { "$ref": "#/$defs/SceneTransition" },
        "exitTransition": { "$ref": "#/$defs/SceneTransition" },
        "background": { "$ref": "#/$defs/BackgroundConfig" },
        "vars": { "type": "object", "additionalProperties": true },
        "nodes": {
          "type": "array",
          "items": { "$ref": "#/$defs/NodeDSL" }
        },
        "triggers": {
          "type": "array",
          "items": { "$ref": "#/$defs/TriggerDSL" }
        }
      }
    },
    "LayoutConfig": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["stack", "grid", "flex", "absolute", "masonry"]
        },
        "padding": {
          "oneOf": [
            { "type": "number" },
            { "type": "string" },
            { "type": "array", "items": { "type": "number" } }
          ]
        },
        "gap": { "oneOf": [{ "type": "number" }, { "type": "string" }] },
        "columns": { "type": "integer", "minimum": 1 },
        "rows": { "type": "integer", "minimum": 1 },
        "align": { "type": "string", "enum": ["start", "center", "end", "stretch"] },
        "justify": {
          "type": "string",
          "enum": ["start", "center", "end", "between", "around", "evenly"]
        },
        "reverse": { "type": "boolean" },
        "wrap": { "type": "boolean" }
      }
    },
    "SceneTransition": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": { "$ref": "#/$defs/TransitionType" },
        "duration": { "type": "number", "minimum": 0 },
        "easing": { "$ref": "#/$defs/EasingFunction" },
        "direction": { "$ref": "#/$defs/TransitionDirection" },
        "custom": { "type": "string" }
      }
    },
    "BackgroundConfig": {
      "type": "object",
      "properties": {
        "color": { "type": "string" },
        "image": { "type": "string" },
        "gradient": { "$ref": "#/$defs/GradientDefinition" },
        "video": { "type": "string" },
        "size": { "type": "string" },
        "position": { "type": "string" },
        "blur": { "type": "number", "minimum": 0 },
        "overlay": { "type": "string" },
        "parallax": { "type": "boolean" }
      }
    },
    "GradientDefinition": {
      "type": "object",
      "required": ["type", "colors"],
      "properties": {
        "type": { "type": "string", "enum": ["linear", "radial", "conic"] },
        "angle": { "type": "number" },
        "colors": {
          "type": "array",
          "items": { "$ref": "#/$defs/GradientStop" },
          "minItems": 2
        }
      }
    },
    "GradientStop": {
      "type": "object",
      "required": ["color"],
      "properties": {
        "color": { "type": "string" },
        "position": { "type": "number", "minimum": 0, "maximum": 100 }
      }
    },
    "NodeDSL": {
      "type": "object",
      "required": ["id", "type"],
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "type": { "type": "string", "minLength": 1 },
        "props": { "type": "object", "additionalProperties": true },
        "style": { "$ref": "#/$defs/StyleProperties" },
        "styleClass": {
          "oneOf": [
            { "type": "string" },
            { "type": "array", "items": { "type": "string" } }
          ]
        },
        "enterAnimation": { "$ref": "#/$defs/NodeAnimation" },
        "exitAnimation": { "$ref": "#/$defs/NodeAnimation" },
        "interactions": {
          "type": "array",
          "items": { "$ref": "#/$defs/NodeInteraction" }
        },
        "visible": {
          "oneOf": [{ "type": "boolean" }, { "$ref": "#/$defs/ConditionDSL" }]
        }
      }
    },
    "NodeAnimation": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": { "type": "string", "minLength": 1 },
        "duration": { "type": "number", "minimum": 0 },
        "easing": { "$ref": "#/$defs/EasingFunction" },
        "delay": { "type": "number", "minimum": 0 },
        "params": { "type": "object", "additionalProperties": true }
      }
    },
    "BuiltinAnimation": {
      "type": "string",
      "enum": [
        "fadeIn",
        "fadeOut",
        "slideInLeft",
        "slideInRight",
        "slideInUp",
        "slideInDown",
        "slideOutLeft",
        "slideOutRight",
        "slideOutUp",
        "slideOutDown",
        "scaleIn",
        "scaleOut",
        "rotateIn",
        "rotateOut",
        "bounceIn",
        "bounceOut",
        "flipInX",
        "flipInY",
        "flipOutX",
        "flipOutY",
        "zoomIn",
        "zoomOut",
        "pulse",
        "shake",
        "wobble",
        "swing",
        "tada",
        "heartbeat",
        "rubber",
        "jello",
        "float",
        "glow"
      ]
    },
    "NodeInteraction": {
      "type": "object",
      "required": ["trigger"],
      "properties": {
        "trigger": {
          "type": "string",
          "enum": ["hover", "click", "focus", "active", "visible"]
        },
        "animation": { "type": "string" },
        "style": { "$ref": "#/$defs/StyleProperties" },
        "duration": { "type": "number", "minimum": 0 },
        "easing": { "$ref": "#/$defs/EasingFunction" }
      }
    },
    "TriggerDSL": {
      "type": "object",
      "required": ["on", "then"],
      "properties": {
        "on": { "$ref": "#/$defs/EventMatcher" },
        "if": {
          "type": "array",
          "items": { "$ref": "#/$defs/ConditionDSL" }
        },
        "then": {
          "type": "array",
          "items": { "$ref": "#/$defs/ActionDSL" },
          "minItems": 1
        },
        "else": {
          "type": "array",
          "items": { "$ref": "#/$defs/ActionDSL" }
        }
      }
    },
    "EventMatcher": {
      "type": "object",
      "required": ["event"],
      "properties": {
        "event": { "type": "string", "minLength": 1 },
        "target": { "type": "string" }
      }
    },
    "ConditionDSL": {
      "oneOf": [
        { "$ref": "#/$defs/ComparisonCondition" },
        { "$ref": "#/$defs/LogicalCondition" }
      ]
    },
    "ComparisonCondition": {
      "type": "object",
      "required": ["op", "left", "right"],
      "properties": {
        "op": {
          "type": "string",
          "enum": ["equals", "notEquals", "gt", "gte", "lt", "lte"]
        },
        "left": { "$ref": "#/$defs/ValueOrRef" },
        "right": { "$ref": "#/$defs/ValueOrRef" }
      }
    },
    "LogicalCondition": {
      "type": "object",
      "required": ["op", "conditions"],
      "properties": {
        "op": { "type": "string", "enum": ["and", "or", "not"] },
        "conditions": {
          "type": "array",
          "items": { "$ref": "#/$defs/ConditionDSL" },
          "minItems": 1
        }
      }
    },
    "ValueOrRef": {
      "oneOf": [
        { "$ref": "#/$defs/RefExpression" },
        { "type": "string" },
        { "type": "number" },
        { "type": "boolean" },
        { "type": "null" },
        { "type": "array" },
        { "type": "object" }
      ]
    },
    "RefExpression": {
      "type": "object",
      "required": ["ref"],
      "properties": {
        "ref": {
          "type": "string",
          "minLength": 1,
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*(\\.[a-zA-Z_][a-zA-Z0-9_]*)*$"
        }
      },
      "additionalProperties": false
    },
    "ActionDSL": {
      "oneOf": [
        { "$ref": "#/$defs/GotoSceneAction" },
        { "$ref": "#/$defs/SetVarAction" },
        { "$ref": "#/$defs/IncVarAction" },
        { "$ref": "#/$defs/AddScoreAction" },
        { "$ref": "#/$defs/ToastAction" },
        { "$ref": "#/$defs/ModalAction" },
        { "$ref": "#/$defs/ResetNodeAction" },
        { "$ref": "#/$defs/PlayAnimationAction" },
        { "$ref": "#/$defs/StopAnimationAction" },
        { "$ref": "#/$defs/SetStyleAction" },
        { "$ref": "#/$defs/AddClassAction" },
        { "$ref": "#/$defs/RemoveClassAction" },
        { "$ref": "#/$defs/SetThemeAction" },
        { "$ref": "#/$defs/ShowNodeAction" },
        { "$ref": "#/$defs/HideNodeAction" },
        { "$ref": "#/$defs/ParallelAction" },
        { "$ref": "#/$defs/SequenceAction" },
        { "$ref": "#/$defs/DelayAction" },
        { "$ref": "#/$defs/SoundAction" },
        { "$ref": "#/$defs/HapticAction" }
      ]
    },
    "GotoSceneAction": {
      "type": "object",
      "required": ["action", "sceneId"],
      "properties": {
        "action": { "const": "gotoScene" },
        "sceneId": { "type": "string", "minLength": 1 },
        "transition": { "$ref": "#/$defs/SceneTransition" }
      },
      "additionalProperties": false
    },
    "SetVarAction": {
      "type": "object",
      "required": ["action", "path", "value"],
      "properties": {
        "action": { "const": "setVar" },
        "path": { "type": "string", "minLength": 1 },
        "value": {}
      },
      "additionalProperties": false
    },
    "IncVarAction": {
      "type": "object",
      "required": ["action", "path"],
      "properties": {
        "action": { "const": "incVar" },
        "path": { "type": "string", "minLength": 1 },
        "by": { "type": "number" }
      },
      "additionalProperties": false
    },
    "AddScoreAction": {
      "type": "object",
      "required": ["action", "value"],
      "properties": {
        "action": { "const": "addScore" },
        "value": { "type": "number" }
      },
      "additionalProperties": false
    },
    "ToastAction": {
      "type": "object",
      "required": ["action", "text"],
      "properties": {
        "action": { "const": "toast" },
        "text": { "type": "string" },
        "duration": { "type": "number", "minimum": 0 },
        "position": { "type": "string", "enum": ["top", "center", "bottom"] },
        "variant": { "type": "string", "enum": ["info", "success", "warning", "error"] },
        "icon": { "type": "string" }
      },
      "additionalProperties": false
    },
    "ModalAction": {
      "type": "object",
      "required": ["action", "text"],
      "properties": {
        "action": { "const": "modal" },
        "text": { "type": "string" },
        "title": { "type": "string" },
        "buttons": {
          "type": "array",
          "items": { "$ref": "#/$defs/ModalButton" }
        },
        "style": { "$ref": "#/$defs/StyleProperties" },
        "enterAnimation": { "$ref": "#/$defs/NodeAnimation" }
      },
      "additionalProperties": false
    },
    "ModalButton": {
      "type": "object",
      "required": ["text"],
      "properties": {
        "text": { "type": "string" },
        "variant": { "type": "string", "enum": ["primary", "secondary", "danger"] },
        "actions": {
          "type": "array",
          "items": { "$ref": "#/$defs/ActionDSL" }
        }
      }
    },
    "ResetNodeAction": {
      "type": "object",
      "required": ["action", "nodeId"],
      "properties": {
        "action": { "const": "resetNode" },
        "nodeId": { "type": "string", "minLength": 1 }
      },
      "additionalProperties": false
    },
    "PlayAnimationAction": {
      "type": "object",
      "required": ["action", "target", "animation"],
      "properties": {
        "action": { "const": "playAnimation" },
        "target": { "type": "string", "minLength": 1 },
        "animation": { "type": "string", "minLength": 1 },
        "duration": { "type": "number", "minimum": 0 },
        "easing": { "$ref": "#/$defs/EasingFunction" },
        "delay": { "type": "number", "minimum": 0 },
        "iterations": { "type": "integer", "minimum": -1 }
      },
      "additionalProperties": false
    },
    "StopAnimationAction": {
      "type": "object",
      "required": ["action", "target"],
      "properties": {
        "action": { "const": "stopAnimation" },
        "target": { "type": "string", "minLength": 1 }
      },
      "additionalProperties": false
    },
    "SetStyleAction": {
      "type": "object",
      "required": ["action", "target", "style"],
      "properties": {
        "action": { "const": "setStyle" },
        "target": { "type": "string", "minLength": 1 },
        "style": { "$ref": "#/$defs/StyleProperties" },
        "animate": { "type": "boolean" },
        "duration": { "type": "number", "minimum": 0 },
        "easing": { "$ref": "#/$defs/EasingFunction" }
      },
      "additionalProperties": false
    },
    "AddClassAction": {
      "type": "object",
      "required": ["action", "target", "className"],
      "properties": {
        "action": { "const": "addClass" },
        "target": { "type": "string", "minLength": 1 },
        "className": {
          "oneOf": [
            { "type": "string" },
            { "type": "array", "items": { "type": "string" } }
          ]
        },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "RemoveClassAction": {
      "type": "object",
      "required": ["action", "target", "className"],
      "properties": {
        "action": { "const": "removeClass" },
        "target": { "type": "string", "minLength": 1 },
        "className": {
          "oneOf": [
            { "type": "string" },
            { "type": "array", "items": { "type": "string" } }
          ]
        },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "SetThemeAction": {
      "type": "object",
      "required": ["action", "theme"],
      "properties": {
        "action": { "const": "setTheme" },
        "theme": { "type": "string", "minLength": 1 },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "ShowNodeAction": {
      "type": "object",
      "required": ["action", "target"],
      "properties": {
        "action": { "const": "showNode" },
        "target": { "type": "string", "minLength": 1 },
        "animation": { "type": "string" },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "HideNodeAction": {
      "type": "object",
      "required": ["action", "target"],
      "properties": {
        "action": { "const": "hideNode" },
        "target": { "type": "string", "minLength": 1 },
        "animation": { "type": "string" },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "ParallelAction": {
      "type": "object",
      "required": ["action", "actions"],
      "properties": {
        "action": { "const": "parallel" },
        "actions": {
          "type": "array",
          "items": { "$ref": "#/$defs/ActionDSL" },
          "minItems": 1
        }
      },
      "additionalProperties": false
    },
    "SequenceAction": {
      "type": "object",
      "required": ["action", "actions"],
      "properties": {
        "action": { "const": "sequence" },
        "actions": {
          "type": "array",
          "items": { "$ref": "#/$defs/ActionDSL" },
          "minItems": 1
        }
      },
      "additionalProperties": false
    },
    "DelayAction": {
      "type": "object",
      "required": ["action", "duration"],
      "properties": {
        "action": { "const": "delay" },
        "duration": { "type": "number", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "SoundAction": {
      "type": "object",
      "required": ["action", "src"],
      "properties": {
        "action": { "const": "sound" },
        "src": { "type": "string", "minLength": 1 },
        "volume": { "type": "number", "minimum": 0, "maximum": 1 },
        "loop": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "HapticAction": {
      "type": "object",
      "required": ["action", "type"],
      "properties": {
        "action": { "const": "haptic" },
        "type": {
          "type": "string",
          "enum": ["light", "medium", "heavy", "success", "warning", "error"]
        }
      },
      "additionalProperties": false
    }
  }
}
